/** UMsimpleCharts jQuery.subclass || Version: 1.0
* (C) 2013, MikO (Michael Ochmann) */
var instanceCount=0;(function(e){e.fn.UMsimpleCharts=function(t){var n;var r=this;var i=0;var s=e.extend({backgroundColor:"#dddddd",size:"300",type:"pie",legend:true,values:[]},t);var o={getRadians:function(e){degrees=e*360+90;return degrees*Math.PI/180},moveToCenter:function(){n.moveTo(s.size/2,s.size/2)},drawPieBackground:function(){n.clearRect(0,0,n.canvas.width,n.canvas.height);n.beginPath();n.arc(s.size/2,s.size/2,s.size/2-5,0,o.getRadians(1),false);n.closePath();n.fillStyle=s.backgroundColor;n.fill()},drawBarsBackground:function(){n.clearRect(0,0,n.canvas.width,n.canvas.height);n.beginPath();n.moveTo(1,0);n.lineTo(1,s.size-1);n.lineTo(s.size-1,s.size-1);n.lineWidth=2;n.strokeStyle="black";n.stroke();for(var e=0;e<1;e+=.1){n.moveTo(2,Math.floor(s.size*e)+.6);n.lineTo(s.size-1,Math.floor(s.size*e)+.6)}n.lineWidth=1;n.strokeStyle="#aaaaaa";n.stroke()},drawPie:function(){o.drawPieBackground();for(var e=0;e<s.values.length;e++){if(i<1){n.beginPath();o.moveToCenter();n.arc(s.size/2,s.size/2,s.size/2-5,o.getRadians(i),o.getRadians(s.values[e][1]/100+i),false);n.fillStyle=s.values[e][2];n.closePath();n.fill();i=i+s.values[e][1]/100}else{r.append("<p style='color: red; font-weight: bold;'>The sum of submitted values is greater than 100%!</p>")}}},drawBars:function(){o.drawBarsBackground();var e=s.size/(s.values.length+s.values.length/3);for(var t=0;t<s.values.length;t++){n.beginPath();n.rect(t*e+t*e/3+5,s.size-s.size*(s.values[t][1]/100)-5,e,s.size*(s.values[t][1]/100));n.fillStyle=s.values[t][2];n.closePath();n.fill()}},drawLegend:function(){r.append("<br/>");for(var e=0;e<s.values.length;e++){r.append("<div style='float: left;font-size: small; margin: 30px 20px 0 0;'><span style='display: block; width: 10px; height: 10px; border: solid 1px black; float: left; vertical-align: middle; margin-right: 8px; margin-top: 2px; background: "+s.values[e][2]+";'></span>"+s.values[e][0]+"</div>")}r.append("<div style='clear: both;'></div>")},init:function(){instanceCount=instanceCount+1;r.html("<canvas width='"+s.size+"px' height='"+s.size+"px' id='UMProgressView_"+instanceCount+"'></canvas>");canvasID=r.children("canvas").attr("id");n=document.getElementById(canvasID).getContext("2d");if(s.type=="pie"){o.drawPie()}else if(s.type=="bars"){o.drawBars()}if(s.legend==true){o.drawLegend()}}};o.init()}})(jQuery)